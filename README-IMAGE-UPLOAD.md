# راهنمای آپلود تصاویر محلی

## تغییرات اعمال شده

این پروژه حالا قابلیت آپلود و ذخیره تصاویر به صورت محلی را دارد. به جای استفاده از لینک‌های خارجی، تصاویر در پوشه `public/images` ذخیره می‌شوند.

## ویژگی‌های جدید

### 1. آپلود تصویر محلی
- انتخاب فایل تصویری از کامپیوتر
- پیش‌نمایش تصویر قبل از ذخیره
- اعتبارسنجی نوع و اندازه فایل
- ذخیره خودکار در پوشه `public/images`

### 2. اعتبارسنجی فایل
- فقط فایل‌های تصویری (JPG, PNG, GIF, WebP)
- حداکثر اندازه 5 مگابایت
- بررسی نوع MIME فایل

### 3. سرور آپلود
- سرور Express برای مدیریت آپلود فایل‌ها
- API endpoint برای آپلود: `/api/upload-image`
- مدیریت خطاها و پاسخ‌های مناسب

## نحوه اجرا

### 1. نصب وابستگی‌ها
```bash
npm install
```

### 2. اجرای کامل پروژه (فرانت‌اند + بک‌اند)
```bash
npm run dev:full
```

### 3. اجرای جداگانه

#### فقط سرور آپلود:
```bash
npm run server
```

#### فقط فرانت‌اند:
```bash
npm run dev
```

## ساختار فایل‌ها

```
CafeRest (1)/
├── public/
│   └── images/          # تصاویر آپلود شده
├── src/
│   ├── components/admin/
│   │   └── MenuManagement.jsx  # کامپوننت مدیریت منو
│   └── utils/
│       ├── imageUpload.js      # توابع آپلود تصویر
│       └── index.js           # صادرات توابع
├── server.js            # سرور Express
└── package.json
```

## API Endpoints

### آپلود تصویر
```
POST /api/upload-image
Content-Type: multipart/form-data

Body: { image: File }
```

### دریافت لیست تصاویر
```
GET /api/images
```

### حذف تصویر
```
DELETE /api/images/:filename
```

### بررسی وضعیت سرور
```
GET /api/health
```

## نحوه استفاده در کامپوننت

### انتخاب تصویر
1. روی دکمه "انتخاب تصویر" کلیک کنید
2. فایل تصویری مورد نظر را انتخاب کنید
3. پیش‌نمایش تصویر نمایش داده می‌شود
4. در صورت نیاز، روی دکمه "حذف" کلیک کنید

### ذخیره آیتم
1. اطلاعات آیتم را وارد کنید
2. تصویر را انتخاب کنید (اختیاری)
3. روی دکمه "ذخیره" کلیک کنید
4. تصویر به صورت خودکار آپلود و ذخیره می‌شود

## نکات مهم

1. **سرور باید در حال اجرا باشد**: برای آپلود تصاویر، سرور Express باید در حال اجرا باشد
2. **پورت 3001**: سرور روی پورت 3001 اجرا می‌شود
3. **CORS**: سرور برای درخواست‌های فرانت‌اند پیکربندی شده است
4. **حجم فایل**: حداکثر اندازه فایل 5 مگابایت است
5. **فرمت‌های مجاز**: JPG, PNG, GIF, WebP

## عیب‌یابی

### خطای "خطا در آپلود تصویر"
- بررسی کنید که سرور در حال اجرا باشد
- بررسی کنید که فایل تصویری باشد
- بررسی کنید که اندازه فایل کمتر از 5 مگابایت باشد

### تصویر نمایش داده نمی‌شود
- بررسی کنید که فایل در پوشه `public/images` وجود داشته باشد
- بررسی کنید که مسیر فایل صحیح باشد

## توسعه آینده

- اضافه کردن قابلیت تغییر اندازه تصاویر
- اضافه کردن قابلیت فشرده‌سازی تصاویر
- اضافه کردن قابلیت آپلود چندین تصویر
- اضافه کردن قابلیت مدیریت تصاویر (حذف، ویرایش) 